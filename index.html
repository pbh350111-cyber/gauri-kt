<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KT ê°€ìš°ë¦¬ì—”í„°í”„ë¼ì´ì¦ˆ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script type="text/javascript">
        (function(){
            // âœ… ì‚¬ì¥ë‹˜ ê³µê°œí‚¤
            emailjs.init("oM5C3k8SXXow-GN5v");
        })();
    </script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; }
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 pb-20 md:pb-0">

    <!-- [1] ê³ ê°ìš© í™”ë©´ -->
    <div id="user-page" class="mx-auto max-w-md bg-white shadow-2xl min-h-screen relative">
        
        <!-- ìƒë‹¨ ë°°ë„ˆ -->
        <div class="relative h-80 bg-slate-900 text-white overflow-hidden">
            <!-- [ì•ˆì „ì¥ì¹˜] onerror: ì‚¬ì§„ ì£¼ì†Œê°€ í‹€ë¦¬ë©´ ê¸°ë³¸ ì´ë¯¸ì§€ê°€ ë‚˜ì˜µë‹ˆë‹¤ -->
            <img id="hero-image" src="" onerror="this.src='https://images.unsplash.com/photo-1556740738-b6a63e27c4df?auto=format&fit=crop&q=80&w=1000'" class="absolute inset-0 h-full w-full object-cover opacity-60 transition-transform duration-[30s] hover:scale-110" alt="ë§¤ì¥ ë°°ê²½">
            <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
            <div class="relative z-10 flex h-full flex-col justify-end p-6 pb-10 fade-in">
                <div class="mb-2 inline-flex self-start rounded bg-cyan-500 px-3 py-1 text-xs font-bold shadow-md">KT ê³µì‹ì¸ì¦ ëŒ€ë¦¬ì </div>
                <h1 id="main-title" class="text-3xl font-bold leading-tight drop-shadow-lg"></h1>
                <p id="main-subtitle" class="mt-2 text-cyan-200 font-medium text-sm"></p>
            </div>
        </div>

        <!-- í†µê³„ -->
        <div class="grid grid-cols-3 divide-x divide-slate-100 border-b bg-white p-4 text-center shadow-sm relative z-20 -mt-6 mx-4 rounded-xl fade-in">
            <div><div class="text-lg font-bold text-cyan-500">6ê°œ</div><div class="text-xs text-slate-500">ì§ì˜ ë§¤ì¥</div></div>
            <div><div class="text-lg font-bold text-cyan-500">100%</div><div class="text-xs text-slate-500">ì •í’ˆ ê°œí†µ</div></div>
            <div><div class="text-lg font-bold text-cyan-500">MAX</div><div class="text-xs text-slate-500">ì§€ì›ê¸ˆ ë³´ì¥</div></div>
        </div>

        <!-- ìƒí’ˆ ì§„ì—´ -->
        <div class="p-6">
            <h2 class="mb-4 text-xl font-bold flex items-center"><i data-lucide="smartphone" class="mr-2 text-cyan-500 w-5"></i> í™”ì œì˜ ìµœì‹  ëª¨ë¸</h2>
            <div class="grid grid-cols-2 gap-3">
                <div class="group relative overflow-hidden rounded-xl bg-slate-100 shadow-sm transition hover:shadow-md">
                    <img id="img-prod1" src="" onerror="this.src='https://placehold.co/600x800?text=No+Image'" class="w-full aspect-[4/5] object-cover" alt="ìƒí’ˆ1">
                    <div id="badge-prod1" class="absolute top-2 left-2 rounded bg-red-500 px-1.5 py-0.5 text-[10px] font-bold text-white shadow-sm"></div>
                    <div class="absolute bottom-0 w-full p-3 bg-gradient-to-t from-black/80 to-transparent text-white">
                        <div id="title-prod1" class="font-bold text-sm"></div>
                    </div>
                </div>
                <div class="group relative overflow-hidden rounded-xl bg-slate-100 shadow-sm transition hover:shadow-md">
                    <img id="img-prod2" src="" onerror="this.src='https://placehold.co/600x800?text=No+Image'" class="w-full aspect-[4/5] object-cover" alt="ìƒí’ˆ2">
                    <div id="badge-prod2" class="absolute top-2 left-2 rounded bg-orange-500 px-1.5 py-0.5 text-[10px] font-bold text-white shadow-sm"></div>
                    <div class="absolute bottom-0 w-full p-3 bg-gradient-to-t from-black/80 to-transparent text-white">
                        <div id="title-prod2" class="font-bold text-sm"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìƒë‹´ ì‹ ì²­ í¼ -->
        <div id="consult-section" class="p-6 pb-10 bg-white">
            <div class="rounded-2xl bg-slate-900 p-6 text-white shadow-xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 bg-cyan-500/20 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none"></div>
                <h3 class="mb-4 text-xl font-bold flex items-center relative z-10">
                    <i data-lucide="gift" class="mr-2 text-cyan-400 w-5"></i> ë§ì¶¤ í˜œíƒ ì¡°íšŒ
                </h3>
                
                <form id="consultForm" class="space-y-4 relative z-10" onsubmit="submitForm(event)">
                    <div class="grid grid-cols-2 gap-2">
                        <input type="text" id="name" name="name" placeholder="ì´ë¦„" required class="p-3 rounded bg-slate-700/50 border border-slate-600 text-sm text-white w-full focus:outline-none focus:border-cyan-500">
                        <input type="tel" id="phone" name="phone" placeholder="ì—°ë½ì²˜" required class="p-3 rounded bg-slate-700/50 border border-slate-600 text-sm text-white w-full focus:outline-none focus:border-cyan-500">
                    </div>

                    <select id="branch" name="branch" required class="w-full p-3 rounded bg-slate-700/50 border border-slate-600 text-sm text-white focus:outline-none focus:border-cyan-500">
                        <option value="" disabled selected>ìƒë‹´ë°›ì„ ì§€ì  ì„ íƒ (í•„ìˆ˜)</option>
                        <option value="ì„¸ì¢… ì†Œë‹´ì ">ì„¸ì¢… ì†Œë‹´ì </option>
                        <option value="ì„¸ì¢… ì¢…ì´Œì ">ì„¸ì¢… ì¢…ì´Œì </option>
                        <option value="ëŒ€ì „ ëª©ë™ì ">ëŒ€ì „ ëª©ë™ì </option>
                        <option value="ëŒ€ì „ ë³µìˆ˜ì ">ëŒ€ì „ ë³µìˆ˜ì </option>
                        <option value="ëŒ€ì „ ìš©ì „ì ">ëŒ€ì „ ìš©ì „ì </option>
                        <option value="ëŒ€ì „ ë°˜ì„ì ">ëŒ€ì „ ë°˜ì„ì </option>
                    </select>

                    <div class="space-y-2 pt-2 border-t border-slate-700">
                        <div class="text-xs text-cyan-400 font-bold">í˜„ì¬ í†µì‹ ì‚¬</div>
                        <div class="grid grid-cols-2 gap-2">
                            <select id="mobile_carrier" name="mobile_carrier" required class="p-2 rounded bg-slate-700/50 border border-slate-600 text-xs text-white w-full">
                                <option value="">íœ´ëŒ€í° ì„ íƒ</option>
                                <option>SKT</option><option>KT</option><option>LG U+</option><option>ì•Œëœ°í°</option>
                            </select>
                            <select id="internet_carrier" name="internet_carrier" required class="p-2 rounded bg-slate-700/50 border border-slate-600 text-xs text-white w-full">
                                <option value="">ì¸í„°ë„· ì„ íƒ</option>
                                <option>SKT</option><option>KT</option><option>LG U+</option><option>ì•Œëœ°í°</option><option>ì—†ìŒ</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex items-center text-xs text-slate-400">
                        <input type="checkbox" id="agree" required class="mr-2 accent-cyan-500">
                        <label for="agree">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ìƒë‹´ í™œìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
                    </div>

                    <button type="submit" id="submit-btn" class="w-full bg-cyan-500 hover:bg-cyan-400 py-4 rounded font-bold text-white mt-2 transition shadow-lg transform active:scale-95">ìƒë‹´ ì‹ ì²­í•˜ê¸°</button>
                </form>
            </div>
        </div>

        <!-- í•˜ë‹¨ ë°” -->
        <div class="fixed bottom-0 left-0 right-0 z-50 flex h-16 border-t bg-white shadow-lg md:hidden">
            <a id="tel-link" href="#" class="flex-1 flex flex-col items-center justify-center text-slate-600 bg-slate-50 active:bg-slate-200">
                <i data-lucide="phone" class="w-5 mb-0.5"></i>
                <span class="text-[10px] font-bold">ì „í™” ìƒë‹´</span>
            </a>
            <button onclick="document.getElementById('consult-section').scrollIntoView({behavior:'smooth'})" class="flex-[2] bg-cyan-500 text-white font-bold text-lg flex items-center justify-center active:bg-cyan-600">
                ì§€ì›ê¸ˆ ì¡°íšŒí•˜ê¸° <i data-lucide="chevron-right" class="ml-1 w-5"></i>
            </button>
        </div>

        <!-- ê´€ë¦¬ì ë²„íŠ¼ -->
        <button onclick="toggleAdmin()" class="fixed bottom-20 right-4 z-50 bg-slate-800 text-white p-3 rounded-full shadow-lg opacity-50 hover:opacity-100 transition">
            <i data-lucide="settings" class="w-5 h-5"></i>
        </button>
    </div>

    <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="admin-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-white p-8 rounded-xl w-full max-w-sm shadow-2xl animate-in fade-in">
            <div class="text-center mb-6">
                <h2 class="text-xl font-bold">ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
            </div>
            <input type="text" id="admin-id" placeholder="ì•„ì´ë””" class="w-full border p-3 rounded mb-3">
            <input type="password" id="admin-pw" placeholder="ë¹„ë°€ë²ˆí˜¸" class="w-full border p-3 rounded mb-6">
            <div class="flex gap-2">
                <button onclick="toggleAdmin()" class="flex-1 bg-slate-100 py-3 rounded font-bold">ì·¨ì†Œ</button>
                <button onclick="adminLogin()" class="flex-1 bg-slate-900 text-white py-3 rounded font-bold">ë¡œê·¸ì¸</button>
            </div>
        </div>
    </div>

    <!-- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ -->
    <div id="admin-dashboard" class="hidden min-h-screen bg-slate-100 p-4">
        <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-bold text-slate-800 flex items-center"><i data-lucide="layout-dashboard" class="mr-2"></i> ê´€ë¦¬ì í˜ì´ì§€</h1>
                <div class="flex gap-2">
                    <button onclick="switchTab('leads')" id="btn-leads" class="bg-slate-800 text-white px-4 py-2 rounded text-sm font-bold shadow-md transition">ì ‘ìˆ˜ í˜„í™©</button>
                    <button onclick="switchTab('settings')" id="btn-settings" class="bg-slate-200 text-slate-600 px-4 py-2 rounded text-sm font-bold shadow-sm transition">ì‚¬ì´íŠ¸ ì„¤ì •</button>
                    <button onclick="location.reload()" class="bg-red-500 text-white px-4 py-2 rounded text-sm ml-2 shadow-md">ë‚˜ê°€ê¸°</button>
                </div>
            </div>

            <!-- íƒ­ 1: ì ‘ìˆ˜ í˜„í™© -->
            <div id="tab-leads" class="bg-white rounded-lg shadow overflow-hidden animate-in fade-in">
                <div class="p-4 border-b bg-slate-50 text-sm text-slate-500 flex justify-between items-center">
                    <span>* ê³ ê° ë¬¸ì˜ ë‚´ì—­ (ìµœì‹ ìˆœ)</span>
                    <button onclick="if(confirm('ì „ì²´ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){localStorage.removeItem('kt_leads'); loadLeads();}" class="text-xs text-red-400 hover:text-red-600 font-bold border border-red-200 px-2 py-1 rounded">ë‚´ì—­ ì´ˆê¸°í™”</button>
                </div>
                <div id="leads-list" class="divide-y text-sm max-h-[70vh] overflow-y-auto no-scrollbar">
                    <div class="p-8 text-center text-slate-400">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                </div>
            </div>

            <!-- ì‚¬ì´íŠ¸ ì„¤ì • íƒ­ -->
            <div id="tab-settings" class="hidden bg-white rounded-lg shadow p-6 space-y-8 animate-in fade-in">
                
                <!-- ì¶”ì²œ ë°©ë²•: ImgBB -->
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6">
                    <h3 class="font-bold text-blue-800 text-sm mb-2 flex items-center">âœ… ì‚¬ì§„ ë¬´ë£Œ í˜¸ìŠ¤íŒ… (íšŒì›ê°€ì… X)</h3>
                    <p class="text-xs text-slate-600 mb-3">ë‚´ ì»´í“¨í„°ì˜ ì‚¬ì§„ì„ ì¸í„°ë„· ì£¼ì†Œ(URL)ë¡œ ë°”ê¿”ì¤ë‹ˆë‹¤.</p>
                    
                    <a href="https://ko.imgbb.com/" target="_blank" class="inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700 transition shadow-sm w-full justify-center">
                        <i data-lucide="image-plus" class="w-4 h-4 mr-2"></i> ì‚¬ì§„ ì—…ë¡œë“œí•˜ëŸ¬ ê°€ê¸°
                    </a>
                    
                    <div class="mt-3 text-[11px] text-slate-600 bg-white p-3 rounded border border-blue-200 leading-relaxed">
                        <strong class="text-blue-700">[ê°€ì¥ ì‰¬ìš´ ë°©ë²•]</strong><br>
                        1. ìœ„ ë²„íŠ¼ í´ë¦­ â†’ <strong>'ì—…ë¡œë“œ ì‹œì‘'</strong> â†’ ì‚¬ì§„ ì„ íƒ â†’ <strong>'ì—…ë¡œë“œ'</strong><br>
                        2. ë³µì¡í•œ ì½”ë“œ ë³µì‚¬í•˜ì§€ ë§ˆì‹œê³ !<br>
                        3. <strong>í™”ë©´ì— ëœ¬ ì‚¬ì§„ ìœ„ì—ì„œ ë§ˆìš°ìŠ¤ ìš°í´ë¦­</strong> í•˜ì„¸ìš”.<br>
                        4. <strong>'ì´ë¯¸ì§€ ì£¼ì†Œ ë³µì‚¬'</strong> (ë˜ëŠ” 'ì´ë¯¸ì§€ ë§í¬ ë³µì‚¬')ë¥¼ ëˆ„ë¥´ì„¸ìš”.<br>
                        5. ê·¸ ì£¼ì†Œë¥¼ ì•„ë˜ ì¹¸ì— ë¶™ì—¬ë„£ê¸° í•˜ë©´ ë! (ì£¼ì†Œê°€ .jpg, .png ë“±ìœ¼ë¡œ ëë‚˜ì•¼ í•©ë‹ˆë‹¤)
                    </div>
                </div>

                <div class="space-y-4">
                    <h2 class="text-lg font-bold border-b pb-2 flex items-center text-slate-700">ê¸°ë³¸ ì •ë³´</h2>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div><label class="block text-xs font-bold text-slate-500 mb-1">ì œëª©</label><input type="text" id="conf-title" class="w-full border p-2 rounded"></div>
                        <div><label class="block text-xs font-bold text-slate-500 mb-1">ë¶€ì œëª©</label><input type="text" id="conf-subtitle" class="w-full border p-2 rounded"></div>
                    </div>
                    <div><label class="block text-xs font-bold text-slate-500 mb-1">ë°°ê²½ ì´ë¯¸ì§€ URL</label><input type="text" id="conf-heroImage" class="w-full border p-2 rounded" placeholder="https://..."></div>
                    <div><label class="block text-xs font-bold text-slate-500 mb-1">ì „í™”ë²ˆí˜¸</label><input type="text" id="conf-tel" class="w-full border p-2 rounded"></div>
                </div>

                <div class="space-y-6">
                    <h2 class="text-lg font-bold border-b pb-2 flex items-center text-slate-700">ìƒí’ˆ ê´€ë¦¬</h2>
                    <div class="border rounded-lg p-4 bg-slate-50">
                        <div class="font-bold text-sm mb-3">ìƒí’ˆ 1 (ì™¼ìª½)</div>
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <input type="text" id="conf-prod1-name" placeholder="ìƒí’ˆëª…" class="border p-2 rounded text-sm">
                            <input type="text" id="conf-prod1-badge" placeholder="ë°°ì§€" class="border p-2 rounded text-sm">
                        </div>
                        <input type="text" id="conf-prod1-img" placeholder="ì´ë¯¸ì§€ URL" class="w-full border p-2 rounded text-xs">
                    </div>
                    <div class="border rounded-lg p-4 bg-slate-50">
                        <div class="font-bold text-sm mb-3">ìƒí’ˆ 2 (ì˜¤ë¥¸ìª½)</div>
                        <div class="grid grid-cols-2 gap-3 mb-3">
                            <input type="text" id="conf-prod2-name" placeholder="ìƒí’ˆëª…" class="border p-2 rounded text-sm">
                            <input type="text" id="conf-prod2-badge" placeholder="ë°°ì§€" class="border p-2 rounded text-sm">
                        </div>
                        <input type="text" id="conf-prod2-img" placeholder="ì´ë¯¸ì§€ URL" class="w-full border p-2 rounded text-xs">
                    </div>
                </div>

                <button onclick="saveConfig()" class="w-full bg-slate-900 text-white py-4 rounded-xl font-bold hover:bg-slate-800 transition shadow-lg">ì €ì¥í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="module">
        lucide.createIcons();

        const DEFAULT_CONFIG = {
            title: "KT ê°€ìš°ë¦¬<br>ì—”í„°í”„ë¼ì´ì¦ˆ",
            subtitle: "ìš°ë¦¬ ë™ë„¤ 1ë“± í˜œíƒ! ì¸í„°ë„·+TV+íœ´ëŒ€í° ìµœëŒ€ ì§€ì›",
            heroImage: "https://images.unsplash.com/photo-1556740738-b6a63e27c4df?auto=format&fit=crop&q=80&w=2000",
            telNumber: "010-0000-0000",
            prod1Name: "Galaxy S25 Ultra", prod1Badge: "AI ë²ˆì—­ íƒ‘ì¬", prod1Img: "https://images.unsplash.com/photo-1610945415295-d9bbf067e59c?auto=format&fit=crop&q=80&w=600",
            prod2Name: "iPhone 17 Pro Max", prod2Badge: "New: ì½”ë¯¹ìŠ¤ ì˜¤ë Œì§€", prod2Img: "https://images.unsplash.com/photo-1512054502232-10a0a035d672?auto=format&fit=crop&q=80&w=600"
        };

        function loadConfig() {
            const config = JSON.parse(localStorage.getItem('kt_config')) || DEFAULT_CONFIG;
            safeSetHTML('main-title', config.title); safeSetText('main-subtitle', config.subtitle); safeSetSrc('hero-image', config.heroImage);
            const telLink = document.getElementById('tel-link'); if(telLink) telLink.href = 'tel:' + config.telNumber;
            safeSetText('title-prod1', config.prod1Name); safeSetText('badge-prod1', config.prod1Badge); safeSetSrc('img-prod1', config.prod1Img);
            safeSetText('title-prod2', config.prod2Name); safeSetText('badge-prod2', config.prod2Badge); safeSetSrc('img-prod2', config.prod2Img);

            safeSetValue('conf-title', config.title); safeSetValue('conf-subtitle', config.subtitle); safeSetValue('conf-heroImage', config.heroImage); safeSetValue('conf-tel', config.telNumber);
            safeSetValue('conf-prod1-name', config.prod1Name); safeSetValue('conf-prod1-badge', config.prod1Badge); safeSetValue('conf-prod1-img', config.prod1Img);
            safeSetValue('conf-prod2-name', config.prod2Name); safeSetValue('conf-prod2-badge', config.prod2Badge); safeSetValue('conf-prod2-img', config.prod2Img);
        }

        window.saveConfig = function() {
            const newConfig = {
                title: document.getElementById('conf-title').value,
                subtitle: document.getElementById('conf-subtitle').value,
                heroImage: document.getElementById('conf-heroImage').value,
                telNumber: document.getElementById('conf-tel').value,
                prod1Name: document.getElementById('conf-prod1-name').value,
                prod1Badge: document.getElementById('conf-prod1-badge').value,
                prod1Img: document.getElementById('conf-prod1-img').value,
                prod2Name: document.getElementById('conf-prod2-name').value,
                prod2Badge: document.getElementById('conf-prod2-badge').value,
                prod2Img: document.getElementById('conf-prod2-img').value
            };
            localStorage.setItem('kt_config', JSON.stringify(newConfig));
            alert("âœ… ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
            loadConfig();
        }

        function safeSetHTML(id, val) { const el = document.getElementById(id); if(el) el.innerHTML = val; }
        function safeSetText(id, val) { const el = document.getElementById(id); if(el) el.innerText = val; }
        function safeSetSrc(id, val) { const el = document.getElementById(id); if(el) el.src = val; }
        function safeSetValue(id, val) { const el = document.getElementById(id); if(el) el.value = val; }

        loadConfig();

        window.submitForm = function(e) {
            e.preventDefault();
            const btn = document.getElementById('submit-btn');
            btn.innerText = "ì „ì†¡ ì¤‘...";
            btn.disabled = true;
            
            const formParams = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                branch: document.getElementById('branch').value,
                mobile_carrier: document.getElementById('mobile_carrier').value,
                internet_carrier: document.getElementById('internet_carrier').value,
                date: new Date().toLocaleString()
            };

            const serviceID = "service_tje5nks"; 
            const templateID = "template_g02rutc"; 

            emailjs.send(serviceID, templateID, formParams)
                .then(() => {
                    alert("ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! ë‹´ë‹¹ìê°€ ê³§ ì—°ë½ë“œë¦½ë‹ˆë‹¤.");
                    saveLocally(formParams);
                    document.getElementById('consultForm').reset();
                })
                .catch((err) => {
                    alert("ì „ì†¡ ì‹¤íŒ¨: " + JSON.stringify(err));
                })
                .finally(() => {
                    btn.innerText = "ìƒë‹´ ì‹ ì²­í•˜ê¸°";
                    btn.disabled = false;
                });
        }

        function saveLocally(data) {
            let leads = JSON.parse(localStorage.getItem('kt_leads') || '[]');
            leads.unshift(data);
            localStorage.setItem('kt_leads', JSON.stringify(leads));
        }

        window.toggleAdmin = function() { document.getElementById('admin-modal').classList.toggle('hidden'); }
        window.switchTab = function(tabName) {
            if (tabName === 'leads') {
                document.getElementById('tab-leads').classList.remove('hidden'); document.getElementById('tab-settings').classList.add('hidden');
                document.getElementById('btn-leads').classList.replace('bg-slate-200', 'bg-slate-800'); document.getElementById('btn-leads').classList.replace('text-slate-600', 'text-white');
                document.getElementById('btn-settings').classList.replace('bg-slate-800', 'bg-slate-200'); document.getElementById('btn-settings').classList.replace('text-white', 'text-slate-600');
            } else {
                document.getElementById('tab-leads').classList.add('hidden'); document.getElementById('tab-settings').classList.remove('hidden');
                document.getElementById('btn-settings').classList.replace('bg-slate-200', 'bg-slate-800'); document.getElementById('btn-settings').classList.replace('text-slate-600', 'text-white');
                document.getElementById('btn-leads').classList.replace('bg-slate-800', 'bg-slate-200'); document.getElementById('btn-leads').classList.replace('text-white', 'text-slate-600');
            }
        }

        window.adminLogin = function() {
            const id = document.getElementById('admin-id').value;
            const pw = document.getElementById('admin-pw').value;
            if(id === 'bbh3501' && pw === 'Ktkt7979!!') {
                document.getElementById('user-page').classList.add('hidden');
                document.getElementById('admin-modal').classList.add('hidden');
                document.getElementById('admin-dashboard').classList.remove('hidden');
                loadLeads(); loadConfig(); 
            } else { alert('ì•„ì´ë””/ë¹„ë²ˆì´ í‹€ë ¸ìŠµë‹ˆë‹¤.'); }
        }

        function loadLeads() {
            const list = document.getElementById('leads-list');
            const leads = JSON.parse(localStorage.getItem('kt_leads') || '[]');
            if (leads.length === 0) { list.innerHTML = '<div class="p-12 text-center text-slate-400">ë°ì´í„° ì—†ìŒ</div>'; return; }
            list.innerHTML = leads.map(l => `
                <div class="p-4 hover:bg-slate-50 transition border-b last:border-0">
                    <div class="flex justify-between mb-2"><span class="font-bold text-slate-800 text-lg">${l.name}</span><span class="text-xs text-slate-400 mt-1">${l.date}</span></div>
                    <div class="flex items-center gap-2 mb-2"><span class="bg-cyan-100 text-cyan-700 px-2 py-0.5 rounded text-xs font-bold">ğŸ“ ${l.phone}</span><span class="bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs">ğŸ“ ${l.branch}</span></div>
                    <div class="text-xs text-slate-500 bg-slate-50 p-2 rounded border">ğŸ“± í°: ${l.mobile_carrier} &nbsp;|&nbsp; ğŸŒ ë„·: ${l.internet_carrier}</div>
                </div>`).join('');
        }
    </script>
</body>
</html>